local Players = game:GetService("Players")

-- 1. Sinaliza para parar todas as funções
_G.ESP_Enabled = false

-- 2. Desconecta PlayerAdded e CharacterAdded (evita que o ESP volte ao renascer)
if _G.ESP_Connections then
    for _, conn in pairs(_G.ESP_Connections) do
        if conn then conn:Disconnect() end
    end
    _G.ESP_Connections = {}
end

-- 3. Remove os desenhos da tela imediatamente
for _, player in pairs(Players:GetPlayers()) do
    local character = player.Character
    if character then
        local fullESP = character:FindFirstChild("FullPlayerESP")
        if fullESP then
            fullESP:Destroy()
        end
    end
end

print("[ESP] DESATIVADO E LIMPO")