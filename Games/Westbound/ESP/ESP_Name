local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local function applyOnlyNameESP(player)
    if player == LocalPlayer then return end

    local function onCharacterAdded(character)
        local root = character:WaitForChild("HumanoidRootPart", 10)
        if not root then return end

        if character:FindFirstChild("OnlyNameESP") then character.OnlyNameESP:Destroy() end

        local billboard = Instance.new("BillboardGui")
        billboard.Name = "OnlyNameESP"
        billboard.Adornee = root
        billboard.Parent = character
        billboard.Size = UDim2.new(0, 200, 0, 50)
        billboard.StudsOffsetWorldSpace = Vector3.new(0, 4, 0)
        billboard.AlwaysOnTop = true

        local textLabel = Instance.new("TextLabel")
        textLabel.Parent = billboard
        textLabel.BackgroundTransparency = 1
        textLabel.Size = UDim2.new(1, 0, 1, 0)
        textLabel.Text = player.Name
        textLabel.TextColor3 = Color3.fromRGB(255, 0, 4)
        textLabel.TextStrokeTransparency = 1
        textLabel.Font = Enum.Font.SourceSansBold
        textLabel.TextSize = 14
        textLabel.TextXAlignment = Enum.TextXAlignment.Center
        textLabel.TextYAlignment = Enum.TextYAlignment.Center
    end

    if player.Character then task.spawn(onCharacterAdded, player.Character) end
    player.CharacterAdded:Connect(onCharacterAdded)
end

for _, player in pairs(Players:GetPlayers()) do applyOnlyNameESP(player) end
Players.PlayerAdded:Connect(applyOnlyNameESP)