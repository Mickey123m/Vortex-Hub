local TargetItem = "CurseCircle"
local TargetPart = "HitDetect"

if _G.AntiCurseActiveID then
    _G.AntiCurseActiveID = nil
    warn("ANTI-CURSE: DESATIVADO")
    return
end

local currentID = tick()
_G.AntiCurseActiveID = currentID
warn("ANTI-CURSE: ATIVADO")

local function disableCurse(obj)
    if obj.Name == TargetItem then
        local hit = obj:FindFirstChild(TargetPart) or obj:WaitForChild(TargetPart, 3)
        
        if hit then
            for _, child in pairs(hit:GetChildren()) do
                if child:IsA("TouchTransmitter") or child.Name == "TouchInterest" then
                    child:Destroy()
                end
            end
        end
    end
end

local function getEntitiesFolders()
    local folders = {}
    for _, child in pairs(workspace:GetChildren()) do
        if child.Name == "Entities" and child:IsA("Folder") then
            table.insert(folders, child)
        end
    end
    return folders
end

for _, folder in pairs(getEntitiesFolders()) do
    for _, child in pairs(folder:GetChildren()) do
        disableCurse(child)
    end
    
    folder.ChildAdded:Connect(function(child)
        if _G.AntiCurseActiveID == currentID then
            task.wait(0.1)
            disableCurse(child)
            task.wait(0.5)
            disableCurse(child)
        end
    end)
end

task.spawn(function()
    while _G.AntiCurseActiveID == currentID do
        for _, folder in pairs(getEntitiesFolders()) do
            for _, child in pairs(folder:GetChildren()) do
                if child.Name == TargetItem then
                    disableCurse(child)
                end
            end
        end
        task.wait(0.5)
    end
end)