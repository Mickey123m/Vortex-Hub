local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local player = Players.LocalPlayer

if _G.OriginalProps == nil then
    _G.OriginalProps = {}
end

if _G.AutoCollectCash == nil then
    _G.AutoCollectCash = false
end

_G.AutoCollectCash = not _G.AutoCollectCash

local function restoreCollectibles()
    for part, props in pairs(_G.OriginalProps) do
        if part and part.Parent then
            part.CFrame = props.CFrame
            part.Transparency = props.Transparency
            part.CanCollide = props.CanCollide
        end
    end
    _G.OriginalProps = {}
end

if not _G.AutoCollectCash then 
    restoreCollectibles()
    return 
end

local function getMyBaseFolder()
    local baseId = player:GetAttribute("Base")
    local basesFolder = Workspace:FindFirstChild("Bases")
    if not basesFolder then return nil end
    
    if baseId and basesFolder:FindFirstChild(tostring(baseId)) then
        return basesFolder:FindFirstChild(tostring(baseId))
    end
    
    for _, b in pairs(basesFolder:GetChildren()) do
        if b.Name == player.Name or b:FindFirstChild(player.Name) then
            return b
        end
    end
    return nil
end

local function collectCash()
    local myBase = getMyBaseFolder()
    if not myBase then return end
    
    local character = player.Character
    local root = character and character:FindFirstChild("HumanoidRootPart")
    if not root then return end

    for i = 1, 5 do
        local floor = myBase:FindFirstChild("Floor" .. i)
        if floor then
            local platforms = floor:FindFirstChild("Platforms")
            if platforms then
                for _, model in pairs(platforms:GetChildren()) do
                    local collectPart = model:FindFirstChild("Collect")
                    if collectPart and collectPart:IsA("BasePart") then
                        
                        if not _G.OriginalProps[collectPart] then
                            _G.OriginalProps[collectPart] = {
                                CFrame = collectPart.CFrame,
                                Transparency = collectPart.Transparency,
                                CanCollide = collectPart.CanCollide
                            }
                        end

                        collectPart.CanCollide = false
                        collectPart.Transparency = 1
                        
                        local originalCFrame = _G.OriginalProps[collectPart].CFrame
                        collectPart.CFrame = root.CFrame
                        
                        if firetouchinterest then
                            firetouchinterest(collectPart, root, 0)
                            firetouchinterest(collectPart, root, 1)
                        end
                        
                        collectPart.CFrame = originalCFrame
                    end
                end
            end
        end
    end
end

task.spawn(function()
    while _G.AutoCollectCash do
        pcall(collectCash)
        task.wait(1.5)
    end
    restoreCollectibles()
end)